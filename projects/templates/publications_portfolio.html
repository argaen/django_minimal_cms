{% load thumbnail %}

<section id="box-{{order}}" class="container-fluid wrapper style2 main-section" style="background-color: {{background_color}}">
  <div class="container">
    <div class="row-flex" style="width:100%;">
      <div class="row" style="width:100%;">

        <header class="major">
          <h2>{{title}}</h2>
        </header>

        <div class="col-md-12" style="width:100%;">
          <!-- <div id="isotope-filters-publications" style="text-align:center;margin-bottom: 10px;"> -->
          <!--   <button class="btn btn-default" data-filter="*">All</button> -->
          <!--   {% for c in categories %} -->
          <!--     <button class="btn btn-default" data-filter=".{{c}}">{{c}}</button> -->
          <!--   {% endfor %} -->
          <!-- </div> -->
          <div class="row">

            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
              {% for o in objects %}

                <div class="panel panel-alt">
                  <a data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{o.id}}" aria-expanded="true" aria-controls="collapse{{o.id}}" style="cursor:pointer;">
                    <div class="panel-heading" role="tab" id="heading{{o.id}}">
                      <ul class="fa-ul">
                        <li class="panel-title">
                          <i class="fa-li fa fa-file-text"></i> {{o.title}}
                          <h6 style="text-transform:none;">{{ o.authors }}</h6>
                          <h6 style="text-transform:none;">
                          {{ o.journal }}
                          {% if o.volume %}
                            {{ o.volume }}
                          {% endif %}
                          ,

                          {{ o.first_page }}
                          {% if o.last_page %}
                          -{{ o.last_page }} 
                          {% endif %} (<span class="years-filter">{{o.published_on.year}}</span>).</h6>
                        </li>
                      </ul>
                    </div>
                  </a>

                  <div id="collapse{{o.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledly="heading{{o.id}}">
                    <div class="panel-body">

                      {% if o.image %}
                        <div class="col-md-3">
                          <img class="img-responsive" src="{% thumbnail o.image "300x300" crop="center" %}" style="border-radius:5px;">
                          <p style="margin-top: 30px;text-align:center;"><a class="button alt" target="_blank" href="http://dx.doi.org/{{o.doi}}">Journal</a></p>
                        </div>
                        <div class="col-md-9">
                          {{o.abstract}}
                        </div>
                      {% else %}
                        {{o.abstract}}
                      {% endif %}

                    </div>
                  </div>
                </div>

              {% endfor %}
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<script>
  var $isotope_publications = $('.isotope-publications');
  $isotope_publications.isotope({
    // options
    itemSelector: '.isotope-item-publications',
    layoutMode: 'masonry'
  });

  $('#isotope-filters-publications').on( 'click', 'button', function() {
    var filterValue = $(this).attr('data-filter');
    $isotope_publications.isotope({ filter: filterValue });
  });

</script>
